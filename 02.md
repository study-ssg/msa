2주차 : 2020.01.09 (목)
=============

### 책 2장
* 40P
  * 서비스 계약
    * 변경이 컨슈머에 장애를 일으키지 않아야 함
    * 서비스 간 의존성을 명확하게 실별하고 관리할 수 있어야 함
    * 표준화(표준 계약 게시) 필요
* 42P
  * 비동기 구성 예시

### 책 3장
* 60P
  * 마이크로서비스 플랫폼
    * 실행 플랫폼 : 로드밸런서, VM과 같은 기본적인 인프라를 포함한 서비스가 실행되는 배포 환경
    * 관촬 가능성 : 서비스 운영 관측을 위한 로깅, 모니터링 통합
    * 배포 파이프라인 : 새로운 서비스와 버전을 테스트하기 위한 일관되고 반복적인 배포 파이프라인
    * 보안 : 네트워크 제어, 비밀 정보 관리, 애플리케이션 강화와 같은 안전한 운영을 위한 지원
    * 커뮤니케이션/서비스 디스커버리 : 서비스 상호작용을 지원하는 커뮤니케이션 채널과 서비스 디스커버리

### 논의
* AI팀 구성
  * Python Celery with Redis
    * 비동기 작업 큐(queue)
    * Redis는 참 다용도인듯? Message Queue 형태로 쓰이는건가
    * MSA에서 사용되는 비동기 구성과 유사하면서도 목적이 좀 다른거 같기도 함
  * Django
    * 파이썬 웹 프레임워크?
  * Docker Swarm
    *  Container Orchestration 환경
* Message Queue
  * RabbitMQ
    * AMQT 프로토콜 기반
    * broker가 consumer에게 메시지를 push해 주는 방식
  * Kafka
    * TCP 기반
    * 대용량의 실시간 로그 처리에 특화되어 설계된 메시징 시스템
    * TPS 매우 우수
    * 파일 시스템 기반 -> 영속성
    * consumer가 broker로부터 직접 메시지를 가지고 가는 pull 방식으로 동작 -> consumer 최적의 성능
    * 메시지를 쌓아두었다가 주기적으로 처리하는 batch consumer의 구현이 가능
  * Redis : Message Queue가 아닌 단순 Pub/Sub 기능? 별도 구현체를 쓰면 가능한가?
* 회사별 MSA 적용사례
  * 네이버, 라인
    <pre>
    네이버, 라인
    </pre>
  * 카카오, 카카오뱅크
    <pre>
    카카오, 카카오뱅크
    </pre>
  * 쿠팡
    <pre>
    쿠팡
    </pre>
  * 배달의민족
    <pre>
    배달의민족
    </pre>
  * 11번가
    * 영상 : https://youtu.be/sfOHAQNP8jo, https://tv.naver.com/v/3925308
    * 목표 : 증가하는 트래픽 대응, 요구사항에 빠르고 안정적으로 대응
    * 솔루션 선택 : Netflix OSS & Spring Cloud (Spring Cloud Netflix)
      * Circuit Breaker (Hystrix)
        * 대행, 통계, 차단(Circuit Open)
        * commandKey, fallbackMethod, timeout, threadPoolKey
        * 장애 차단
      * Client Load Balancer (Ribbon)
        * H/W 없이 L4 대체
        * Discovery를 통한 서버 리스트
        * IRule : Round Robbin, Response Time Weighted, Availability Filter(특정 서버 차단)
        * IPing : 직접 호출, Discovery를 통해서
        * Retry
        * 실사용 : RestTemplate, Feign Client, Zuul API Gateway
      * Dynamic Service Discovery (Eureka)
        * Eureka Client : 등록, 조회
        * Ribbon 연동
    * 실적용
      * 호출
        * legacy to server : legacy에 적용 힘듬, 기존 공통 기능들 보장 -> API Gateway (Zuul) : Hystrix, Ribbon, Eureka 내장
        * server to server : Spring Cloud Feign -> 인터페이스 형태, Hystrix, Ribbon, Eureka 내장
        * server to 외부서버 : Hystrix, Ribbon 사용 (Eureka X)
      * 배포
        * 레거시 : L4 기반 (우리와 유사)
        * MSA : L4 대신 Eureka 연동
      * Config
        * legacy : Application Config (개발자), Was Config (인프라 엔지니어)
        * MSA : 내장톰캣 -> Spring Cloud Config + Git -> 히스토리, 인프라 엔지니어도 가능, Pull Req 가능
      * 모니터링
        * Hystrix 모니터링 : Netflix Turbine
        * Spring Boot Admin Server : Actuator 연동 -> 자체 확장 (Eureka, Ribbon 모니터링 추가)
        * Zippkin(수집서버) + Spring Cloud Sleuth(트레이싱)
      * 오픈소스
        * 버그 등 한계점 -> 꾸준한 업데이트, 대응
        * 꾸준한 업데이트를 위해서는 잘 작성된 테스트 케이스 필요
  * 넷플릭스
    * https://youtu.be/OczG5FQIcXw
    <pre>
    넷플릭스
    </pre>

### 숙제
* 차주 : 에이스 승윤이형 부재로 별도로 숙제 없이 오늘 못 한 MSA 사례 공유 이어서 하는걸로
* 차차주 : 책 4~6장 (2주분), 앞으로의 계획 픽스 (구체적으로)
